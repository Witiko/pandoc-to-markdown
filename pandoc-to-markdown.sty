\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{pandoc-to-markdown}[2021/02/22 package pandoc-to-markdown]

% Pandoc to Markdown mapping
\RequirePackage{markdown}
\input"pandoc-to-markdown.tex"

%% Inline elements
\RequirePackage[normalem]{ulem}
\renewcommand\pandocStrikeout[1]{\sout{#1}}
\renewcommand\pandocUnderline[1]{\uline{#1}}

% Key-value definitions
\RequirePackage{keyval}
\def\pandocFormat{markdown}
\define@key{pandoc-to-markdown}{format}{%
  \def\pandocFormat{#1}%
}

% Document command definitions
\newcommand\pandocInput[2][]{%
  \setkeys{pandoc-to-markdown}{#1}%
  \immediate\write18{pandoc -f \pandocFormat\space-i "#2" -t pandoc-to-markdown.lua -o "\jobname.pandoc.tex"}%
  \input"\jobname.pandoc.tex"%
}
